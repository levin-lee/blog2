---
title: 评分卡
date: 2020-08-21 19:01:02
tags:
   - 评分卡
   - 风控模型
mathjax: true
---
评分卡分为A卡、B卡、C卡，在金融领域，A卡是利用最多的模型，尤其是银行，经常运用到贷前准入环节。它具有可解释性，模型稳定等各种优势。

得到评分卡的步骤如下：
## 一、认清目标
我们的目标是预测用户为好人的概率，并将概率转换成打分形式。分数越高表示用户的资质越好。

## 二、数据清洗和数据加工
将我们的非结构数据转化成结构化数据，连续数据转离散数据，去除异常值，标准化处理（最大最小值；正态标准化等）；
分箱操作就是将连续数据转成离散数据的方法之一。分箱的优势为：1、排除异常值的影响，例如：年龄为200岁；2、可以防止模型过拟合；3、为模型引入非线性，提高表达能力
分箱方法：

监督方法：卡方分箱法、IV最大化分箱法
无监督方法：k-means聚类、等频、等宽

## 三、特征工程
得到相对多的特征变量，在得到IV值之前，需要进行WOE，即特征转换。
之后分别计算IV值（information value），计算IV值。
根据IV值大小排列，IV值越高代表单个变量的可解释性越高。
得到比较重要的特征，取前topN特征代入线性回归中。
IV<=0.02，没有解释性
0.1<=IV<0.02，具有较弱的解释性
0.3<=IV<=0.1，具有较强的解释性
0.3<=IV，具有极强的解释性
一般来说，IV大于0.1时候，特征就可以保留下来。

## 四、LR线性回归
普通线性回归为：y = \beta_1x_1+\beta_2x_2+…+\beta_nx_n，而logistic回归是将普通线性回归映射到 [0,1] 范围内。
Logistic 函数为：f(x) = \frac{1}{1+e^-x}
假定P是用户为坏人的概率，则1-P是用户为好人的概率，P∈[0,1]。
P(y=1|x) = \frac{e^wx}{1+e^wx} ….. (1)
P(y=0|x) = \frac{1}{1+e^wx} ……(2)
则 ods = \frac{p}{1-p}，是坏人与好人的几率。令p=P(y=1|x)，则好人的概率为1-p
将公式1除以公式2可得，ln\frac{p}{1-p} = wx，令y= ln\frac{p}{1-p}
故 lny = w_1x_1+w_2x_2+…+w_nx_n

目标函数（损失函数）：
这里我们利用极大似然估计来得到logistic回归的损失函数：
L = \prod{I=1}{N}p^y_i+(1-p)^(1-y_i) ，
则lnL
= \sum{I=1}{N}ylnp+(1-)yln(1-p)
= \sum{I=1}{N}yln\frac{p}{1-p}+ln(1-p)
= \sum{I=1}{N}ywx+ln(\frac{1}{1+e^wx})

如何使损失函数最小化，这个时候就需要利用坐标下降法，来得到各个特征系数的值。

## 五、得到评分卡
在第四步，我们得到坏人的概率之后，就需要将概率转换成我们所需要的分数。
在得到分数之前，我们需要定义三个参数：

基准odds好坏比，即\frac{p}{1-p}
基准分数
PDO(points to Double the odds)：当odds增加两倍时，所减少的信用分
可以列式子：
Base_score = A - Bln(odds)
Base_score - PDO = A - Bln(2odds)
可以得到：A = base_score + frac{PDO}{ln(2)}*ln(odds)，B = frac{PDO}{ln(2)}
当我们希望信用分为600分时，对应的ods为1:50。当ods扩大为2:50时，信用分降低20分至580分(PDO=20)，可以求出AB的取值。
A=487.122 ，B=28.854
## 六、模型评估
详见《模型与策略评估》专栏。

## 参考目录：
【1】《统计学习方法》-李航
【2】《机器学习》-周志华
