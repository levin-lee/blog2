---
title: 模型评估
date: 2021-05-29 11:56:18
tags:
- 模型
cover: https://pica.zhimg.com/80/v2-90258f7dc4fa9e2fddab19b871da1629_1440w.jpg?source=1940ef5c
---
模型评估是验证模型准确率最重要的一步，常用的模型评估指标有AUC、ROC、精准率、召回率、KS、lift、模型稳定性PSI等。此外还可以利用F检验来验证模型是否显著的统计性假设检验。
** 1、ROC（接受者操作曲线）**
** 2、AUC **
AUC的物理意义伟ROC曲线下的面积，一般情况下AUC越大，表示的模型的效果越好。AUC主要由两部分所影响。
- 精准率
- 召回率

** 3、KS **
KS金融模型评估领域中运用十分广泛，尤其在信贷行业，它可以验证模型区分好人坏人的能力，KS
计算公式为：ks = max(Cum.Bi/Bad_total - Cum.Gi/Good_total)
计算KS的代码如下：
法一：
```
from scipy.stats import ks_2samp
 
get_ks = lambda y_pred,y_true: ks_2samp(y_pred[y_true==1], y_pred[y_true!=1]).statistic
 
get_ks(x,y)
```

法二：
```
Import pandas as pd
Import numpy as np
From sklearn.metrics import roc_curve
From spicy.stats import ks_2samp

def ks_calc_cross(data,pred,y_label):
    '''
    功能: 计算KS值，输出对应分割点和累计分布函数曲线图
    输入值:
    data: 二维数组或dataframe，包括模型得分和真实的标签
    pred: 一维数组或series，代表模型得分（一般为预测正类的概率）,已经分成10个区间分数
    y_label: 一维数组或series，代表真实的标签（{0,1}或{-1,1}）
    输出值:
    'ks': KS值，'crossdens': 好坏客户累积概率分布以及其差值gap
    '''
    crossfreq = pd.crosstab(data[pred[0]],data[y_label[0]])
    crossdens = crossfreq.cumsum(axis=0) / crossfreq.sum()
    crossdens['gap'] = abs(crossdens[0] - crossdens[1])
    ks = crossdens['gap'].max()
    
    return ks,crossdens
```

** 4、模型稳定性PSI **
稳定性指标(populations stability index,PSI)可衡量测试样本及模型开发样本评分的分布差异。PSI表示按分数分档后，针对不同时间样本，population分布是否有变化，就是看各个分数区间内人数占总人数占比是否有显著变化。
计算公式为：PSI = sum[(Ac - Ex)*LN(Ac/Ex)]，其中Ac：表示分数区间实际的比例，Ex：表示分数区间预期的比例，也可以是之前模型分数区间的比例。
小于10%，无需更新模型；
10%-25%：检查一下其他度量方式
大于25%：需要更新模型

** 5、lift **
lift也是一种评估模型或者单个强变量是否区分好人坏人有效性的指标，与IV类似，做法是将模型分或者变量切割成几个区间，分别计算各个区间内的放款逾期率和金额逾期率，将各个区间的逾期率除于大盘的逾期率，就可以得到lift，我们俗称梯度。如果lift呈递增或者递减，我们就可以说模型是有效的，lift增长或者下降越快，则模型区分好人和坏人的效果越好。

